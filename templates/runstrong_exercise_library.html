<!DOCTYPE html>
<html lang="en" class="runstrong">

<head>
    <meta charset="UTF-8" />
    <title>Exercise Library | RUNSTRONG</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

</head>

<body class="runstrong">

    <div class="runstrong-navbar">
        <a href="{{ url_for('runstrong') }}">Home</a>
        <a href="{{ url_for('exercise_library') }}">Library</a>
        <a href="{{ url_for('planner') }}">Routines</a>
        <a href="{{ url_for('add_exercise') }}">Add</a>
        <a href="{{ url_for('journal') }}">Journal</a>
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
    </div>

    <div class="runstrong-header">
        <a href="{{ url_for('home') }}">
            <img src="{{ url_for('static', filename='images/RUN_STRONG_logo_transparent.png') }}"
                alt="RunStrong Logo" class="runstrong-logo" />
        </a>
        <p class="runstrong-tagline">Browse Exercises | Learn Proper Form | Train Smart</p>
    </div>

    <div class="exercise-search">
        <input type="text" id="searchInput" placeholder="Search exercises...">
    </div>

    <div class="exercise-grid" id="exerciseGrid">
        <!-- Dynamic cards will be injected here -->
    </div>

    <script>
        async function loadExercises() {
            const response = await fetch('/runstrong/exercises');
            const data = await response.json();
            const container = document.getElementById('exerciseGrid');
            const searchInput = document.getElementById('searchInput');

            function createCard(ex) {
                return `
                    <div class="exercise-card" data-name="${ex.name.toLowerCase()}">
                        <div class="exercise-title">${ex.name}</div>
                        <div class="exercise-type">${ex.exercise_type} | ${ex.movement_pattern}</div>
                        <button class="expand-btn" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'block' ? 'none' : 'block';">
                            Show Details
                        </button>
                        <div class="exercise-details">
                            <strong>Primary Muscles:</strong> ${ex.primary_muscles}<br>
                            <strong>Secondary:</strong> ${ex.secondary_muscles}<br>
                            <strong>Difficulty:</strong> ${ex.difficulty_rating}<br>
                            <strong>Equipment:</strong> ${ex.equipment_required}<br>
                            <strong>Instructions:</strong> ${ex.instructions}<br>
                            <strong>Common Mistakes:</strong> ${ex.common_mistakes}<br>
                            ${ex.video_url ? `<a href="${ex.video_url}" target="_blank" style="color: var(--rs-highlight);">Watch Video</a>` : ''}
                        </div>
                    </div>
                `;
            }

            function render(exercises) {
                container.innerHTML = exercises.map(createCard).join('');
            }

            searchInput.addEventListener('input', () => {
                const value = searchInput.value.toLowerCase();
                const cards = Array.from(container.children);
                cards.forEach(card => {
                    const name = card.getAttribute('data-name');
                    card.style.display = name.includes(value) ? 'block' : 'none';
                });
            });

            render(data.exercises);
        }

        window.onload = loadExercises;
    defer </script> 

</body>

</html>
